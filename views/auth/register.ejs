
      <% layout('../layout') -%>
    <title>회원가입</title>
    <link rel = 'stylesheet' type="text/public" href='/stylesheets/style.css'/>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.0.min.js" ></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.15.0/jquery.validate.min.js"></script>
    <meta name="viewport" content="width=device-width", initial-scale="1">
    <script>
      function btnmail(){
            var val = <%-JSON.stringify(rows)%>;
            for(var i=0;i<val.length;i++){
              var id=val[i].email;
              if(id===$("#email").val()){
                alert("동일한 이메일이 존재합니다.");
                return false;
              }
            }
          return true;
      };
    </script>
  <body>
        <div class="container">
            <div id="loginbox" style="margin-top:8% ;margin-left:30%;" class="mainbox col-md-4 col-md-offset-4">
                <div class="panel panel-info" style="background-color: transparent; ">
                    <div class="panel-heading" style="background-color: transparent;">
                        <div class="panel-title" style="background-color: transparent; color: white; font-weight: 700;">회원가입 <i class="glyphicon glyphicon-edit"></i></div>
                        <div style="float:right; font-size: 80%; position: relative; top:-10px ; "><a href="/auth/passwdfind" style="color: white; font-weight: 700;">비밀번호 찾기</a></div>
                    </div>
                    <div style="padding-top:25px" class="panel-body" >
                        <div style="display:none" id="login-alert" class="alert alert-danger col-sm-12"></div>
                        <form id="registerform" name="registerform" class="form-horizontal" action='/auth/register' method='post' onsubmit="return;">
                            <div style="margin-bottom: 25px" class="input-group">
                                <span class="input-group-addon" style="max-height:60%"><i class="glyphicon glyphicon-envelope"></i></span>
                                <input id="email" type="text" class="form-control" name="email"  style="height:45px" placeholder="이메일(example@gmail.com)" required/>
                            </div>

                            <div style="margin-bottom: 30x" class="input-group ">
                                <span class="input-group-addon" style="height: 20px;"><i class="glyphicon glyphicon-user"></i></span>
                                <input id="name" type="text" class="form-control" style="height:45px" name="name"  placeholder="이름" required/>
                            </div>
                            <div style="margin-left: 10px ;margin-bottom: 10px">
                                <input type="radio" id="contactChoice1"
                                 name="gender" value="male" checked="checked">
                                <label for="contactChoice1"  style="color: white;">남</label>
                                <input type="radio" id="contactChoice2"
                                 name="gender" value="female">
                                <label for="contactChoice2"  style="color: white;">여</label>
                            </div>

                            <div style="margin-bottom: 30px" class="input-group">
                                <span class="input-group-addon"><label><i class="glyphicon glyphicon-user"></label></i></span></label>
                                <input id="nickname" type="text" class="form-control" style="height:45px" name="nickname"  placeholder="닉네임" required/>
                            </div>

                            <div style="margin-bottom: 30px" class="input-group">
                                <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                                <input id="password" type="password" class="form-control" style="height:45px" name="password"  placeholder="password" required/>
                            </div>

                            <div style="margin-bottom: 25px" class="input-group">
                                <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                                <input id="repassword" type="password" class="form-control" style="height:45px" name="repassword"  placeholder="Confirm password" required/>
                            </div>

                            <div class="checkbox" style="margin-bottom: 10px">
                                <label style="color: white;">
                                    <input id="agree" type="checkbox" name="agree" value="1" > 회원가입에 동의합니다.
                                </label>
                            </div>
                            <br>
                            <div class="form-group">
                                <div >
                                    <input type='submit' id="btn-login" class="btn btn-success btn-block" value="회원가입" onclick="return btnmail()"></input>
                                </div>
                            </div>
                            <div class="form-group">
                                <button  class="btn btn-primary btn-block" >
                                  <a href="/auth/login">로그인</a>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
<script>
$(function(){
        $("#registerform").validate({
          rules: {
              email: {
                  required : true,
                  minlength : 6,
                  email:true
              },
              password: {
                required: true,
                minlength : 6
              },
              repassword: {
                required : true,
                minlength : 6,
                equalTo : password
              },
              name : {
                required :true,
                minlength :2
              },
              nickname : {
                required :true,
                minlength :2
              },
              gender: {
                required: true
              },
              agree : {
                  required : true
              }
          },
          messages : {
            email: {
                required : "필수로 입력하세요",
                minlength : "최소 {0}글자 이상이어야 합니다",
                email : "메일규칙에 어긋납니다"
            },
            password: {
                required : "필수로 입력하세요",
                minlength : "최소 {0}글자 이상이어야 합니다"
            },
            repassword: {
                required : "필수로 입력하세요",
                minlength : "최소 {0}글자 이상이어야 합니다",
                equalTo : "비밀번호가 일치하지 않습니다."
            },
            name: {
                required : "필수로 입력하세요",
                minlength : "최소 {0}글자이상이어야 합니다"

            },
            nickname : {
              required : "필수로 입력하세요",
              minlength : "최소 {0}글자 이상이어야 합니다"
            },
            agree: "정책에 동의해주셔야합니다."
        }
      });
  });
</script>
<style>
label.error {
    color: red;
    position: absolute;
    width: 100%;
    top: 45px;
    line-height: 34px;
    left: 0px;
    text-align: center;
}
</style>
